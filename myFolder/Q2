#include <stdio.h>
#include <stdlib.h>

struct Node {
    int data;
    struct Node* next;
};

// Count and delete all occurrences of key
void countAndDelete(struct Node** head, int key) {
    int count = 0;

    struct Node* temp = *head;
    struct Node* prev = NULL;

    while (temp != NULL) {
        if (temp->data == key) {
            count++;

            if (temp == *head) {
                *head = (*head)->next;
                free(temp);
                temp = *head;
            } else {
                prev->next = temp->next;
                free(temp);
                temp = prev->next;
            }
        } else {
            prev = temp;
            temp = temp->next;
        }
    }

    printf("Count: %d\n", count);
}

// Helper: display
void printList(struct Node* head) {
    while (head) {
        printf("%d ", head->data);
        head = head->next;
    }
}

int main() {
    // Example linked list: 1->2->1->2->1->3->1
    struct Node* head = NULL;

    // manually creating example list for testing
    int arr[] = {1,2,1,2,1,3,1};
    for (int i = 6; i >= 0; i--) {
        struct Node* newNode = (struct Node*)malloc(sizeof(struct Node));
        newNode->data = arr[i];
        newNode->next = head;
        head = newNode;
    }

    int key = 1;
    countAndDelete(&head, key);

    printf("Updated Linked List: ");
    printList(head);
}
